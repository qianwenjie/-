# å­¦ç”Ÿç«¯æ‰‹æœºç«¯è€ƒè¯•åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **åˆ›å»ºæ—¥æœŸ**: 2026-02-03
> **è®¾è®¡èŒƒå›´**: å­¦ç”Ÿç«¯è€ƒè¯•åŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰
> **æŠ€æœ¯æ ˆ**: Vue 3 + Vite + Vant 4 + Pinia

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
4. [é¡µé¢æµç¨‹è®¾è®¡](#é¡µé¢æµç¨‹è®¾è®¡)
5. [æ ¸å¿ƒåŠŸèƒ½è¯¦è§£](#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£)
6. [æ•°æ®ç»“æ„è®¾è®¡](#æ•°æ®ç»“æ„è®¾è®¡)
7. [APIæ¥å£è®¾è®¡](#apiæ¥å£è®¾è®¡)
8. [çŠ¶æ€ç®¡ç†è®¾è®¡](#çŠ¶æ€ç®¡ç†è®¾è®¡)
9. [æŠ€æœ¯å®ç°è¦ç‚¹](#æŠ€æœ¯å®ç°è¦ç‚¹)
10. [ä¸‹ä¸€æ­¥è®¡åˆ’](#ä¸‹ä¸€æ­¥è®¡åˆ’)

---

## é¡¹ç›®æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

ä¸ºè€ƒè¯•ç³»ç»Ÿå¼€å‘**å­¦ç”Ÿç«¯æ‰‹æœºç«¯åº”ç”¨**ï¼Œå®ç°å®Œæ•´çš„è€ƒè¯•åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- è€ƒè¯•åˆ—è¡¨æŸ¥çœ‹
- äººè„¸è¯†åˆ«éªŒè¯
- åœ¨çº¿ç­”é¢˜ï¼ˆæ”¯æŒ7ç§é¢˜å‹ï¼‰
- ç­”é¢˜å¡å¯¼èˆª
- å€’è®¡æ—¶æé†’
- äº¤å·ç¡®è®¤
- æˆç»©æŸ¥çœ‹
- æ‰¹é˜…è¯¦æƒ…æŸ¥çœ‹

### 1.2 ç”¨æˆ·åœºæ™¯

**ç›®æ ‡ç”¨æˆ·**: å­¦ç”Ÿ/è€ƒç”Ÿ
**ä½¿ç”¨è®¾å¤‡**: æ‰‹æœºï¼ˆiOS/Androidï¼‰
**æ ¸å¿ƒè¯‰æ±‚**:
- ä¾¿æ·å‚åŠ è€ƒè¯•
- æµç•…çš„ç­”é¢˜ä½“éªŒ
- æ¸…æ™°çš„æˆç»©åé¦ˆ
- è¯¦ç»†çš„é”™é¢˜è§£æ

### 1.3 è®¾è®¡åŸåˆ™

- âœ… **ç§»åŠ¨ä¼˜å…ˆ**: ä¸“ä¸ºæ‰‹æœºç«¯ä¼˜åŒ–çš„UIå’Œäº¤äº’
- âœ… **æµç¨‹æ¸…æ™°**: å¼•å¯¼å¼çš„è€ƒè¯•æµç¨‹ï¼Œé™ä½æ“ä½œé—¨æ§›
- âœ… **æ•°æ®å®‰å…¨**: ç­”é¢˜æ•°æ®æœ¬åœ°ç¼“å­˜ + è‡ªåŠ¨åŒæ­¥
- âœ… **ç¦»çº¿å®¹é”™**: ç½‘ç»œæ–­å¼€æ—¶ä¿å­˜ç­”æ¡ˆï¼Œæ¢å¤ååŒæ­¥
- âœ… **æ€§èƒ½ä¼˜åŒ–**: å¤§é¢˜é‡è¯•å·çš„æµç•…åŠ è½½å’Œåˆ‡æ¢

---

## æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue | 3.4+ | å‰ç«¯æ¡†æ¶ |
| Vite | 5.0+ | æ„å»ºå·¥å…· |
| Vant | 4.8+ | ç§»åŠ¨ç«¯UIç»„ä»¶åº“ |
| Pinia | 2.1+ | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.2+ | è·¯ç”±ç®¡ç† |
| Axios | 1.6+ | HTTPè¯·æ±‚ |

### 2.2 æ ¸å¿ƒä¾èµ–

```json
{
  "dependencies": {
    "vue": "^3.4.0",
    "vue-router": "^4.2.0",
    "pinia": "^2.1.0",
    "vant": "^4.8.0",
    "axios": "^1.6.0",
    "@vant/touch-emulator": "^1.4.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.0.0",
    "vite": "^5.0.0",
    "unplugin-vue-components": "^0.26.0",
    "unplugin-auto-import": "^0.17.0"
  }
}
```

### 2.3 é¡¹ç›®ä½ç½®

```
è€ƒè¯•ç³»ç»Ÿè®¾è®¡/
â””â”€â”€ prototypes/
    â”œâ”€â”€ admin/              # ç®¡ç†ç«¯ï¼ˆå·²æœ‰ï¼‰
    â””â”€â”€ student-mobile/     # å­¦ç”Ÿç«¯æ‰‹æœºç«¯ï¼ˆæ–°å»ºï¼‰
```

**è¯´æ˜**: å­¦ç”Ÿç«¯ä½œä¸ºç‹¬ç«‹å­é¡¹ç›®ï¼Œä¸ç®¡ç†ç«¯å¹¶åˆ—ï¼Œä¾¿äºç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ã€‚

---
## é¡¹ç›®ç»“æ„

### 3.1 ç›®å½•ç»“æ„

```
student-mobile/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ exam.js             # è€ƒè¯•ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ answer.js           # ç­”é¢˜ç›¸å…³æ¥å£
â”‚   â”‚   â””â”€â”€ face.js             # äººè„¸è¯†åˆ«æ¥å£
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ global.css      # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/             # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ QuestionCard/       # é¢˜ç›®å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SingleChoice.vue    # å•é€‰é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ MultipleChoice.vue  # å¤šé€‰é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ TrueFalse.vue       # åˆ¤æ–­é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ FillBlank.vue       # å¡«ç©ºé¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ShortAnswer.vue     # ç®€ç­”é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ Cloze.vue           # å®Œå½¢å¡«ç©º
â”‚   â”‚   â”‚   â””â”€â”€ Composite.vue       # å¤åˆé¢˜
â”‚   â”‚   â”œâ”€â”€ AnswerSheet/        # ç­”é¢˜å¡ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ Timer/              # å€’è®¡æ—¶ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ FaceCapture/        # äººè„¸æ‹ç…§ç»„ä»¶
â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ stores/                 # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ exam.js             # è€ƒè¯•çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ answer.js           # ç­”é¢˜çŠ¶æ€
â”‚   â”‚   â””â”€â”€ user.js             # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ storage.js          # LocalStorage å°è£…
â”‚   â”‚   â”œâ”€â”€ time.js             # æ—¶é—´å¤„ç†
â”‚   â”‚   â”œâ”€â”€ validator.js        # ç­”æ¡ˆæ ¡éªŒ
â”‚   â”‚   â””â”€â”€ request.js          # Axios å°è£…
â”‚   â”œâ”€â”€ views/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ exam/
â”‚   â”‚   â”‚   â”œâ”€â”€ ExamList.vue        # è€ƒè¯•åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ExamDetail.vue      # è€ƒè¯•è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ FaceVerify.vue      # äººè„¸è¯†åˆ«
â”‚   â”‚   â”‚   â”œâ”€â”€ ExamPaper.vue       # ç­”é¢˜é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ExamResult.vue      # è€ƒè¯•æˆç»©
â”‚   â”‚   â”‚   â””â”€â”€ ExamReview.vue      # æŸ¥çœ‹æ‰¹é˜…
â”‚   â”‚   â””â”€â”€ Home.vue                # é¦–é¡µ
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ README.md
```

### 3.2 æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

| æ–‡ä»¶/ç›®å½• | è¯´æ˜ |
|----------|------|
| `api/` | API æ¥å£å°è£…ï¼Œç»Ÿä¸€ç®¡ç†åç«¯è¯·æ±‚ |
| `components/QuestionCard/` | 7ç§é¢˜å‹çš„ç­”é¢˜ç»„ä»¶ï¼Œæ”¯æŒå±•ç¤ºå’Œä½œç­” |
| `components/AnswerSheet/` | ç­”é¢˜å¡å¼¹çª—ï¼Œæ˜¾ç¤ºç­”é¢˜è¿›åº¦å’Œå¿«é€Ÿè·³è½¬ |
| `components/Timer/` | å€’è®¡æ—¶ç»„ä»¶ï¼Œæ”¯æŒæ—¶é—´åˆ°è‡ªåŠ¨äº¤å· |
| `stores/exam.js` | è€ƒè¯•çŠ¶æ€ç®¡ç†ï¼ˆè€ƒè¯•ä¿¡æ¯ã€è¯•å·æ•°æ®ï¼‰ |
| `stores/answer.js` | ç­”é¢˜çŠ¶æ€ç®¡ç†ï¼ˆç­”æ¡ˆæ•°æ®ã€ç­”é¢˜è¿›åº¦ï¼‰ |
| `utils/storage.js` | LocalStorage å°è£…ï¼Œæ”¯æŒç­”æ¡ˆæŒä¹…åŒ– |
| `views/exam/` | è€ƒè¯•ç›¸å…³çš„æ‰€æœ‰é¡µé¢ç»„ä»¶ |

---
## é¡µé¢æµç¨‹è®¾è®¡

### 4.1 å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾

```
è€ƒè¯•åˆ—è¡¨ â†’ è€ƒè¯•è¯¦æƒ… â†’ äººè„¸è¯†åˆ« â†’ ç­”é¢˜é¡µé¢ â†’ äº¤å·ç¡®è®¤ â†’ æäº¤æˆåŠŸ â†’ æŸ¥çœ‹æˆç»© â†’ æ‰¹é˜…è¯¦æƒ…
   â†“          â†“          â†“          â†“          â†“          â†“          â†“          â†“
 ç­›é€‰Tab    çŠ¶æ€æ£€æŸ¥    éªŒè¯3æ¬¡    ç­”é¢˜å¡      æœªç­”æç¤º    ç­‰å¾…æ‰¹é˜…    æ’åä¿¡æ¯    ç­”æ¡ˆè§£æ
 æœç´¢       å€’è®¡æ—¶      é‡è¯•æœºåˆ¶    å€’è®¡æ—¶      æ—¶é—´æ£€æŸ¥    æˆç»©å…¬å¸ƒ    å¾—åˆ†è¯¦æƒ…    æ•™å¸ˆæ‰¹æ³¨
```

### 4.2 é¡µé¢è·¯ç”±è®¾è®¡

| è·¯ç”±è·¯å¾„ | é¡µé¢ç»„ä»¶ | é¡µé¢åç§° | è¯´æ˜ |
|---------|---------|---------|------|
| `/` | Home.vue | é¦–é¡µ | å…¥å£é¡µé¢ |
| `/exam/list` | ExamList.vue | è€ƒè¯•åˆ—è¡¨ | å±•ç¤ºæ‰€æœ‰å¯å‚åŠ çš„è€ƒè¯• |
| `/exam/detail/:id` | ExamDetail.vue | è€ƒè¯•è¯¦æƒ… | æ˜¾ç¤ºè€ƒè¯•å®Œæ•´ä¿¡æ¯ |
| `/exam/face-verify/:id` | FaceVerify.vue | äººè„¸è¯†åˆ« | è¿›å…¥è€ƒè¯•å‰çš„èº«ä»½éªŒè¯ |
| `/exam/paper/:id` | ExamPaper.vue | ç­”é¢˜é¡µé¢ | åœ¨çº¿ç­”é¢˜ä¸»é¡µé¢ |
| `/exam/result/:id` | ExamResult.vue | è€ƒè¯•æˆç»© | æ˜¾ç¤ºè€ƒè¯•æˆç»©å’Œç»Ÿè®¡ |
| `/exam/review/:id` | ExamReview.vue | æ‰¹é˜…è¯¦æƒ… | æŸ¥çœ‹æ¯é“é¢˜çš„æ‰¹é˜…æƒ…å†µ |

### 4.3 é¡µé¢è·³è½¬é€»è¾‘

**è€ƒè¯•åˆ—è¡¨ â†’ è€ƒè¯•è¯¦æƒ…**
- è§¦å‘ï¼šç‚¹å‡»è€ƒè¯•å¡ç‰‡
- å‚æ•°ï¼šè€ƒè¯•ID
- é€»è¾‘ï¼šæ— æ¡ä»¶è·³è½¬

**è€ƒè¯•è¯¦æƒ… â†’ äººè„¸è¯†åˆ«**
- è§¦å‘ï¼šç‚¹å‡»"å¼€å§‹è€ƒè¯•"æŒ‰é’®
- æ¡ä»¶ï¼š
  - è€ƒè¯•çŠ¶æ€ä¸º"è¿›è¡Œä¸­"
  - å­¦ç”Ÿæœªå‚åŠ è¿‡è¯¥è€ƒè¯•
  - è€ƒè¯•é…ç½®å¼€å¯äº†äººè„¸è¯†åˆ«
- é€»è¾‘ï¼šæ£€æŸ¥æ¡ä»¶åè·³è½¬

**äººè„¸è¯†åˆ« â†’ ç­”é¢˜é¡µé¢**
- è§¦å‘ï¼šäººè„¸è¯†åˆ«éªŒè¯æˆåŠŸ
- æ¡ä»¶ï¼šè¯†åˆ«é€šè¿‡
- é€»è¾‘ï¼šè‡ªåŠ¨è·³è½¬ï¼ŒåŠ è½½è¯•å·æ•°æ®

**ç­”é¢˜é¡µé¢ â†’ äº¤å·ç¡®è®¤**
- è§¦å‘ï¼šç‚¹å‡»"äº¤å·"æŒ‰é’® æˆ– æ—¶é—´åˆ°
- æ¡ä»¶ï¼šæ— ï¼ˆå¼¹çª—ç¡®è®¤ï¼‰
- é€»è¾‘ï¼šæ˜¾ç¤ºç¡®è®¤å¼¹çª—

**äº¤å·ç¡®è®¤ â†’ æäº¤æˆåŠŸ**
- è§¦å‘ï¼šç¡®è®¤äº¤å·
- æ¡ä»¶ï¼šè¾¾åˆ°æœ€çŸ­äº¤å·æ—¶é—´
- é€»è¾‘ï¼šæäº¤ç­”æ¡ˆï¼Œæ˜¾ç¤ºæˆåŠŸé¡µé¢

**æäº¤æˆåŠŸ â†’ è€ƒè¯•æˆç»©**
- è§¦å‘ï¼šç‚¹å‡»"æŸ¥çœ‹æˆç»©"æˆ–æˆç»©å…¬å¸ƒå
- æ¡ä»¶ï¼šæˆç»©å·²å…¬å¸ƒ
- é€»è¾‘ï¼šè·³è½¬åˆ°æˆç»©é¡µé¢

**è€ƒè¯•æˆç»© â†’ æ‰¹é˜…è¯¦æƒ…**
- è§¦å‘ï¼šç‚¹å‡»"æŸ¥çœ‹æ‰¹é˜…è¯¦æƒ…"
- æ¡ä»¶ï¼šè¯•å·å·²æ‰¹é˜…å®Œæˆ
- é€»è¾‘ï¼šè·³è½¬åˆ°è¯¦æƒ…é¡µé¢

---
## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 5.1 è€ƒè¯•åˆ—è¡¨ï¼ˆExamList.vueï¼‰

**åŠŸèƒ½æè¿°**:
- å±•ç¤ºå­¦ç”Ÿå¯å‚åŠ çš„æ‰€æœ‰è€ƒè¯•
- æŒ‰çŠ¶æ€åˆ†ç±»ï¼ˆæœªå¼€å§‹/è¿›è¡Œä¸­/å·²ç»“æŸï¼‰
- æ˜¾ç¤ºè€ƒè¯•åŸºæœ¬ä¿¡æ¯å’Œä¸ªäººå‚ä¸çŠ¶æ€

**UIç»„ä»¶**:
- `van-tabs`: Tabåˆ‡æ¢ï¼ˆå…¨éƒ¨/æœªå¼€å§‹/è¿›è¡Œä¸­/å·²ç»“æŸï¼‰
- `van-list`: åˆ—è¡¨å±•ç¤ºï¼Œæ”¯æŒä¸‹æ‹‰åˆ·æ–°
- `van-card`: è€ƒè¯•å¡ç‰‡
- `van-count-down`: å€’è®¡æ—¶ç»„ä»¶ï¼ˆæœªå¼€å§‹çš„è€ƒè¯•ï¼‰

**æ•°æ®å­—æ®µ**:
```javascript
{
  id: 'E001',
  name: 'æ•°æ®ç»“æ„æœŸæœ«è€ƒè¯•',
  startTime: '2026-02-03 14:00',
  endTime: '2026-02-03 16:00',
  duration: 120,  // ä½œç­”æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  status: 'in_progress',  // not_started | in_progress | ended
  myStatus: 'not_started',  // not_started | in_progress | submitted
  score: null,  // æˆç»©ï¼ˆå·²ç»“æŸä¸”å·²æ‰¹é˜…ï¼‰
  totalScore: 100
}
```

**äº¤äº’é€»è¾‘**:
1. é¡µé¢åŠ è½½æ—¶è¯·æ±‚è€ƒè¯•åˆ—è¡¨
2. æ ¹æ® Tab ç­›é€‰ä¸åŒçŠ¶æ€çš„è€ƒè¯•
3. ç‚¹å‡»è€ƒè¯•å¡ç‰‡è·³è½¬åˆ°è¯¦æƒ…é¡µ
4. ä¸‹æ‹‰åˆ·æ–°æ›´æ–°åˆ—è¡¨æ•°æ®

---

### 5.2 è€ƒè¯•è¯¦æƒ…ï¼ˆExamDetail.vueï¼‰

**åŠŸèƒ½æè¿°**:
- æ˜¾ç¤ºè€ƒè¯•å®Œæ•´ä¿¡æ¯ï¼ˆæ—¶é—´ã€æ—¶é•¿ã€è¯•å·ã€è§„åˆ™ï¼‰
- æ ¹æ®è€ƒè¯•çŠ¶æ€æ˜¾ç¤ºä¸åŒæ“ä½œæŒ‰é’®
- è€ƒè¯•é¡»çŸ¥å’Œæ³¨æ„äº‹é¡¹

**UIç»„ä»¶**:
- `van-cell-group`: ä¿¡æ¯å±•ç¤º
- `van-button`: æ“ä½œæŒ‰é’®
- `van-notice-bar`: è€ƒè¯•é¡»çŸ¥
- `van-count-down`: å¼€è€ƒå€’è®¡æ—¶

**æ•°æ®å­—æ®µ**:
```javascript
{
  // åŸºç¡€ä¿¡æ¯
  id: 'E001',
  name: 'æ•°æ®ç»“æ„æœŸæœ«è€ƒè¯•',
  startTime: '2026-02-03 14:00',
  endTime: '2026-02-03 16:00',
  duration: 120,
  
  // è¯•å·ä¿¡æ¯
  paper: {
    name: 'æ•°æ®ç»“æ„æœŸæœ«è¯•å·Aå·',
    totalScore: 100,
    questionCount: 50,
    questionTypes: [
      { type: 'single', count: 20, score: 40 },
      { type: 'multiple', count: 10, score: 30 },
      { type: 'shortAnswer', count: 5, score: 30 }
    ]
  },
  
  // è€ƒè¯•è®¾ç½®
  config: {
    lateLimit: 15,  // å…è®¸è¿Ÿåˆ°åˆ†é’Ÿæ•°
    minSubmitTime: 30,  // æœ€çŸ­äº¤å·æ—¶é—´
    faceRecognition: true,  // æ˜¯å¦å¼€å¯äººè„¸è¯†åˆ«
    randomCapture: true,  // æ˜¯å¦éšæœºæŠ“æ‹
    captureInterval: 5  // æŠ“æ‹é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
  }
}
```

**äº¤äº’é€»è¾‘**:
1. æ ¹æ®è€ƒè¯•çŠ¶æ€æ˜¾ç¤ºä¸åŒæŒ‰é’®ï¼š
   - æœªå¼€å§‹ï¼šæ˜¾ç¤ºå€’è®¡æ—¶
   - è¿›è¡Œä¸­ï¼šæ˜¾ç¤º"å¼€å§‹è€ƒè¯•"æŒ‰é’®
   - å·²ç»“æŸï¼šæ˜¾ç¤º"æŸ¥çœ‹æˆç»©"æŒ‰é’®
2. ç‚¹å‡»"å¼€å§‹è€ƒè¯•"æ£€æŸ¥æ˜¯å¦éœ€è¦äººè„¸è¯†åˆ«
3. å¦‚éœ€äººè„¸è¯†åˆ«ï¼Œè·³è½¬åˆ°äººè„¸è¯†åˆ«é¡µé¢
4. å¦‚ä¸éœ€è¦ï¼Œç›´æ¥è·³è½¬åˆ°ç­”é¢˜é¡µé¢

---
### 5.3 äººè„¸è¯†åˆ«ï¼ˆFaceVerify.vueï¼‰

**åŠŸèƒ½æè¿°**:
- è°ƒç”¨æ‰‹æœºæ‘„åƒå¤´æ‹ç…§
- æ¨¡æ‹Ÿäººè„¸è¯†åˆ«éªŒè¯ï¼ˆåŸå‹é˜¶æ®µï¼‰
- å¤±è´¥é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š3æ¬¡ï¼‰

**UIç»„ä»¶**:
- `video`: HTML5 è§†é¢‘æµï¼ˆæ‘„åƒå¤´é¢„è§ˆï¼‰
- `canvas`: æ‹ç…§æˆªå›¾
- `van-button`: å¼€å§‹è¯†åˆ«æŒ‰é’®
- `van-dialog`: è¯†åˆ«ç»“æœæç¤º

**å®ç°é€»è¾‘**:
```javascript
// 1. è°ƒç”¨æ‘„åƒå¤´
navigator.mediaDevices.getUserMedia({ video: true })

// 2. æ‹ç…§
canvas.getContext('2d').drawImage(video, 0, 0)

// 3. æ¨¡æ‹Ÿè¯†åˆ«ï¼ˆåŸå‹é˜¶æ®µï¼‰
const mockVerify = () => {
  return Math.random() > 0.3  // 70%æˆåŠŸç‡
}

// 4. é‡è¯•æœºåˆ¶
let retryCount = 0
const maxRetry = 3
```

**äº¤äº’é€»è¾‘**:
1. é¡µé¢åŠ è½½æ—¶è¯·æ±‚æ‘„åƒå¤´æƒé™
2. æ˜¾ç¤ºå®æ—¶è§†é¢‘æµé¢„è§ˆ
3. ç‚¹å‡»"å¼€å§‹è¯†åˆ«"æŒ‰é’®æ‹ç…§
4. æ˜¾ç¤ºè¯†åˆ«ä¸­åŠ¨ç”»ï¼ˆ1-2ç§’ï¼‰
5. è¿”å›è¯†åˆ«ç»“æœï¼š
   - æˆåŠŸï¼šè·³è½¬åˆ°ç­”é¢˜é¡µé¢
   - å¤±è´¥ï¼šæ˜¾ç¤ºå¤±è´¥åŸå› ï¼Œå…è®¸é‡è¯•
   - è¶…è¿‡3æ¬¡ï¼šæç¤ºè”ç³»ç›‘è€ƒè€å¸ˆ

---

### 5.4 ç­”é¢˜é¡µé¢ï¼ˆExamPaper.vueï¼‰

**åŠŸèƒ½æè¿°**:
- å±•ç¤ºé¢˜ç›®å¹¶æ”¯æŒä½œç­”
- æ”¯æŒ7ç§é¢˜å‹çš„ç­”é¢˜äº¤äº’
- ç­”é¢˜å¡å¿«é€Ÿå¯¼èˆª
- å€’è®¡æ—¶æé†’
- è‡ªåŠ¨ä¿å­˜ç­”æ¡ˆ

**UIç»„ä»¶**:
- `van-nav-bar`: é¡¶éƒ¨å¯¼èˆªï¼ˆè€ƒè¯•åç§° + å€’è®¡æ—¶ï¼‰
- `QuestionCard`: é¢˜ç›®å¡ç‰‡ç»„ä»¶ï¼ˆåŠ¨æ€åŠ è½½ä¸åŒé¢˜å‹ï¼‰
- `van-button`: ä¸Šä¸€é¢˜/ä¸‹ä¸€é¢˜/æ ‡è®°æŒ‰é’®
- `van-action-sheet`: ç­”é¢˜å¡å¼¹çª—
- `van-dialog`: äº¤å·ç¡®è®¤å¼¹çª—

**æ•°æ®ç»“æ„**:
```javascript
{
  examId: 'E001',
  paperId: 'P001',
  questions: [
    {
      id: 'Q001',
      type: 'single',  // é¢˜å‹
      order: 1,  // é¢˜å·
      content: 'é¢˜å¹²å†…å®¹',
      options: [
        { label: 'A', text: 'é€‰é¡¹A' },
        { label: 'B', text: 'é€‰é¡¹B' }
      ],
      score: 2
    }
  ],
  answers: {
    'Q001': 'A',  // å•é€‰é¢˜ç­”æ¡ˆ
    'Q002': ['A', 'B'],  // å¤šé€‰é¢˜ç­”æ¡ˆ
    'Q003': true,  // åˆ¤æ–­é¢˜ç­”æ¡ˆ
    'Q004': ['ç­”æ¡ˆ1', 'ç­”æ¡ˆ2'],  // å¡«ç©ºé¢˜ç­”æ¡ˆ
    'Q005': 'ç®€ç­”é¢˜ç­”æ¡ˆæ–‡æœ¬'  // ç®€ç­”é¢˜ç­”æ¡ˆ
  },
  marked: ['Q001', 'Q005'],  // æ ‡è®°çš„é¢˜ç›®ID
  startTime: '2026-02-03 14:05:00',  // å¼€å§‹ç­”é¢˜æ—¶é—´
  remainingTime: 7200  // å‰©ä½™ç§’æ•°
}
```

**æ ¸å¿ƒåŠŸèƒ½**:

**1. é¢˜ç›®åˆ‡æ¢**:
- ä¸Šä¸€é¢˜/ä¸‹ä¸€é¢˜æŒ‰é’®
- ç­”é¢˜å¡ç‚¹å‡»è·³è½¬
- æ”¯æŒæ‰‹åŠ¿æ»‘åŠ¨åˆ‡æ¢ï¼ˆå¯é€‰ï¼‰

**2. ç­”æ¡ˆä¿å­˜**:
```javascript
// è‡ªåŠ¨ä¿å­˜åˆ° LocalStorage
const saveAnswer = (questionId, answer) => {
  answers[questionId] = answer
  localStorage.setItem(`exam_${examId}_answers`, JSON.stringify(answers))
}

// å®šæ—¶åŒæ­¥åˆ°æœåŠ¡å™¨ï¼ˆæ¯30ç§’ï¼‰
setInterval(() => {
  syncAnswersToServer()
}, 30000)
```

**3. å€’è®¡æ—¶**:
```javascript
// å€’è®¡æ—¶é€»è¾‘
const countdown = () => {
  remainingTime--
  if (remainingTime <= 0) {
    autoSubmit()  // æ—¶é—´åˆ°è‡ªåŠ¨äº¤å·
  } else if (remainingTime <= 300) {
    showWarning()  // å‰©ä½™5åˆ†é’Ÿæé†’
  }
}
```

**4. ç½‘ç»œæ–­å¼€å¤„ç†**:
```javascript
// ç›‘å¬ç½‘ç»œçŠ¶æ€
window.addEventListener('offline', () => {
  showToast('ç½‘ç»œå·²æ–­å¼€ï¼Œç­”æ¡ˆå°†ä¿å­˜åœ¨æœ¬åœ°')
})

window.addEventListener('online', () => {
  showToast('ç½‘ç»œå·²æ¢å¤ï¼Œæ­£åœ¨åŒæ­¥ç­”æ¡ˆ...')
  syncAnswersToServer()
})
```

---
### 5.5 é¢˜å‹ç»„ä»¶è¯¦è§£

**5.5.1 å•é€‰é¢˜ï¼ˆSingleChoice.vueï¼‰**
```vue
<template>
  <van-radio-group v-model="answer">
    <van-radio
      v-for="option in question.options"
      :key="option.label"
      :name="option.label"
    >
      {{ option.label }}. {{ option.text }}
    </van-radio>
  </van-radio-group>
</template>
```

**5.5.2 å¤šé€‰é¢˜ï¼ˆMultipleChoice.vueï¼‰**
```vue
<template>
  <van-checkbox-group v-model="answer">
    <van-checkbox
      v-for="option in question.options"
      :key="option.label"
      :name="option.label"
    >
      {{ option.label }}. {{ option.text }}
    </van-checkbox>
  </van-checkbox-group>
</template>
```

**5.5.3 åˆ¤æ–­é¢˜ï¼ˆTrueFalse.vueï¼‰**
```vue
<template>
  <van-radio-group v-model="answer">
    <van-radio :name="true">æ­£ç¡®</van-radio>
    <van-radio :name="false">é”™è¯¯</van-radio>
  </van-radio-group>
</template>
```

**5.5.4 å¡«ç©ºé¢˜ï¼ˆFillBlank.vueï¼‰**
```vue
<template>
  <div v-for="(blank, index) in blanks" :key="index">
    <p>ç¬¬ {{ index + 1 }} ç©ºï¼š</p>
    <van-field
      v-model="answer[index]"
      placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
    />
  </div>
</template>
```

**5.5.5 ç®€ç­”é¢˜ï¼ˆShortAnswer.vueï¼‰**
```vue
<template>
  <div>
    <van-field
      v-model="answer.text"
      type="textarea"
      rows="6"
      placeholder="è¯·è¾“å…¥ç­”æ¡ˆ"
    />
    <van-uploader
      v-model="answer.files"
      :max-count="3"
      :after-read="afterRead"
    >
      <van-button icon="plus" type="primary">ä¸Šä¼ é™„ä»¶</van-button>
    </van-uploader>
  </div>
</template>
```

**5.5.6 å®Œå½¢å¡«ç©ºï¼ˆCloze.vueï¼‰**
```vue
<template>
  <div>
    <p>{{ question.content }}</p>
    <div v-for="(blank, index) in question.blanks" :key="index">
      <p>ç¬¬ {{ index + 1 }} ç©ºï¼š</p>
      <van-radio-group v-model="answer[index]">
        <van-radio
          v-for="option in blank.options"
          :key="option.label"
          :name="option.label"
        >
          {{ option.label }}. {{ option.text }}
        </van-radio>
      </van-radio-group>
    </div>
  </div>
</template>
```

**5.5.7 å¤åˆé¢˜ï¼ˆComposite.vueï¼‰**
```vue
<template>
  <div>
    <!-- ææ–™ -->
    <div class="material">
      <h4>ã€ææ–™ã€‘</h4>
      <p>{{ question.material }}</p>
    </div>
    
    <!-- å­é¢˜ç›® -->
    <div
      v-for="(subQuestion, index) in question.subQuestions"
      :key="subQuestion.id"
      class="sub-question"
    >
      <h5>{{ question.order }}-{{ index + 1 }}. {{ subQuestion.content }}</h5>
      <component
        :is="getQuestionComponent(subQuestion.type)"
        :question="subQuestion"
        v-model="answer[subQuestion.id]"
      />
    </div>
  </div>
</template>
```

---

### 5.6 ç­”é¢˜å¡ç»„ä»¶ï¼ˆAnswerSheetï¼‰

**åŠŸèƒ½æè¿°**:
- æ˜¾ç¤ºæ‰€æœ‰é¢˜ç›®çš„ç­”é¢˜çŠ¶æ€
- å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šé¢˜ç›®
- ç»Ÿè®¡ç­”é¢˜è¿›åº¦

**UIå¸ƒå±€**:
```vue
<template>
  <van-action-sheet v-model:show="show" title="ç­”é¢˜å¡">
    <!-- è¿›åº¦æ¡ -->
    <div class="progress">
      <p>è¿›åº¦ï¼š{{ answeredCount }}/{{ totalCount }} ({{ progress }}%)</p>
      <van-progress :percentage="progress" />
    </div>
    
    <!-- é¢˜å‹åˆ†ç»„ -->
    <div v-for="group in questionGroups" :key="group.type">
      <h4>{{ group.typeName }} ({{ group.count }}é¢˜)</h4>
      <div class="question-grid">
        <div
          v-for="q in group.questions"
          :key="q.id"
          :class="getQuestionClass(q)"
          @click="jumpToQuestion(q.order)"
        >
          {{ q.order }}
        </div>
      </div>
    </div>
    
    <!-- å›¾ä¾‹ -->
    <div class="legend">
      <span class="answered">â–  å·²ç­”</span>
      <span class="unanswered">â–¡ æœªç­”</span>
      <span class="marked">â–  æ ‡è®°</span>
    </div>
  </van-action-sheet>
</template>
```

**çŠ¶æ€æ ·å¼**:
```javascript
const getQuestionClass = (question) => {
  if (question.marked) return 'marked'  // æ©™è‰²
  if (question.answered) return 'answered'  // ç»¿è‰²
  return 'unanswered'  // ç°è‰²
}
```

---
### 5.7 è€ƒè¯•æˆç»©ï¼ˆExamResult.vueï¼‰

**åŠŸèƒ½æè¿°**:
- æ˜¾ç¤ºè€ƒè¯•æˆç»©å’Œæ’å
- æˆç»©ç»Ÿè®¡åˆ†æ
- è·³è½¬åˆ°æ‰¹é˜…è¯¦æƒ…

**UIç»„ä»¶**:
- `van-circle`: ç¯å½¢è¿›åº¦æ¡ï¼ˆæ˜¾ç¤ºåˆ†æ•°ï¼‰
- `van-progress`: è¿›åº¦æ¡ï¼ˆå®¢è§‚é¢˜/ä¸»è§‚é¢˜å¾—åˆ†ï¼‰
- `van-cell-group`: æ’åä¿¡æ¯
- `van-button`: æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®

**æ•°æ®ç»“æ„**:
```javascript
{
  examId: 'E001',
  studentId: 'S001',
  totalScore: 85,
  fullScore: 100,
  objectiveScore: 40,  // å®¢è§‚é¢˜å¾—åˆ†
  objectiveFullScore: 40,
  subjectiveScore: 45,  // ä¸»è§‚é¢˜å¾—åˆ†
  subjectiveFullScore: 60,
  rank: {
    class: { rank: 5, total: 120 },
    grade: { rank: 28, total: 500 }
  },
  duration: 85,  // ç­”é¢˜ç”¨æ—¶ï¼ˆåˆ†é’Ÿï¼‰
  avgDuration: 90,  // å¹³å‡ç”¨æ—¶
  publishTime: '2026-02-03 16:00'
}
```

**äº¤äº’é€»è¾‘**:
1. æ£€æŸ¥æˆç»©æ˜¯å¦å·²å…¬å¸ƒ
2. å¦‚æœªå…¬å¸ƒï¼Œæ˜¾ç¤ºç­‰å¾…çŠ¶æ€å’Œé¢„è®¡å…¬å¸ƒæ—¶é—´
3. å¦‚å·²å…¬å¸ƒï¼Œæ˜¾ç¤ºå®Œæ•´æˆç»©ä¿¡æ¯
4. ç‚¹å‡»"æŸ¥çœ‹æ‰¹é˜…è¯¦æƒ…"è·³è½¬åˆ°è¯¦æƒ…é¡µ

---

### 5.8 æ‰¹é˜…è¯¦æƒ…ï¼ˆExamReview.vueï¼‰

**åŠŸèƒ½æè¿°**:
- æŸ¥çœ‹æ¯é“é¢˜çš„å¾—åˆ†å’Œæ‰¹é˜…æƒ…å†µ
- æŸ¥çœ‹æ­£ç¡®ç­”æ¡ˆå’Œè§£æ
- æŸ¥çœ‹æ•™å¸ˆæ‰¹æ³¨ï¼ˆä¸»è§‚é¢˜ï¼‰

**UIç»„ä»¶**:
- `van-tabs`: Tabç­›é€‰ï¼ˆå…¨éƒ¨/ç­”å¯¹/ç­”é”™/æœªç­”ï¼‰
- `van-collapse`: æŠ˜å é¢æ¿ï¼ˆé¢˜ç›®åˆ—è¡¨ï¼‰
- `van-tag`: æ ‡ç­¾ï¼ˆå¾—åˆ†ã€æ­£ç¡®/é”™è¯¯ï¼‰
- `van-image`: å›¾ç‰‡é¢„è§ˆï¼ˆé™„ä»¶ï¼‰

**æ•°æ®ç»“æ„**:
```javascript
{
  examId: 'E001',
  questions: [
    {
      id: 'Q001',
      type: 'single',
      order: 1,
      content: 'é¢˜å¹²å†…å®¹',
      options: [...],
      correctAnswer: 'B',
      myAnswer: 'A',
      isCorrect: false,
      score: 0,
      fullScore: 2,
      explanation: 'ç­”æ¡ˆè§£æå†…å®¹',
      teacherComment: null  // ä¸»è§‚é¢˜æ‰æœ‰
    },
    {
      id: 'Q005',
      type: 'shortAnswer',
      order: 39,
      content: 'ç®€ç­”é¢˜é¢˜å¹²',
      myAnswer: {
        text: 'å­¦ç”Ÿç­”æ¡ˆæ–‡æœ¬',
        files: ['file1.jpg']
      },
      correctAnswer: 'å‚è€ƒç­”æ¡ˆ',
      isCorrect: false,
      score: 5,
      fullScore: 6,
      explanation: 'ç­”æ¡ˆè§£æ',
      teacherComment: 'å›ç­”åŸºæœ¬æ­£ç¡®ï¼Œä½†ç¼ºå°‘å…·ä½“å®ç°ç»†èŠ‚ã€‚-1åˆ†'
    }
  ],
  statistics: {
    total: 50,
    correct: 40,
    wrong: 8,
    unanswered: 2
  }
}
```

**äº¤äº’é€»è¾‘**:
1. é¡¶éƒ¨æ˜¾ç¤ºç­”é¢˜ç»Ÿè®¡å¡ç‰‡ï¼ˆå¯æŠ˜å ï¼‰
2. Tabç­›é€‰ä¸åŒçŠ¶æ€çš„é¢˜ç›®
3. é¢˜ç›®åˆ—è¡¨å±•ç¤ºï¼š
   - é¢˜å·ã€é¢˜å‹ã€å¾—åˆ†
   - å­¦ç”Ÿç­”æ¡ˆï¼ˆæ ‡è®°æ­£ç¡®/é”™è¯¯ï¼‰
   - æ­£ç¡®ç­”æ¡ˆ
   - ç­”æ¡ˆè§£æ
   - æ•™å¸ˆæ‰¹æ³¨ï¼ˆä¸»è§‚é¢˜ï¼‰
4. æ”¯æŒä¸Šä¸€é¢˜/ä¸‹ä¸€é¢˜åˆ‡æ¢
5. é™„ä»¶æ”¯æŒç‚¹å‡»é¢„è§ˆ

---
## æ•°æ®ç»“æ„è®¾è®¡

### 6.1 è€ƒè¯•æ•°æ®ï¼ˆExamï¼‰

```typescript
interface Exam {
  id: string
  name: string
  startTime: string  // ISO 8601 æ ¼å¼
  endTime: string
  duration: number  // åˆ†é’Ÿ
  status: 'not_started' | 'in_progress' | 'ended'
  myStatus: 'not_started' | 'in_progress' | 'submitted'
  score: number | null
  totalScore: number
  paper: Paper
  config: ExamConfig
}

interface ExamConfig {
  lateLimit: number  // å…è®¸è¿Ÿåˆ°åˆ†é’Ÿæ•°
  minSubmitTime: number  // æœ€çŸ­äº¤å·æ—¶é—´
  faceRecognition: boolean
  randomCapture: boolean
  captureInterval: number
  scorePublishTime: 'immediate' | 'after_exam' | 'delayed'
  scorePublishContent: 'score_only' | 'score_and_correct' | 'full'
}
```

### 6.2 è¯•å·æ•°æ®ï¼ˆPaperï¼‰

```typescript
interface Paper {
  id: string
  name: string
  totalScore: number
  questionCount: number
  questions: Question[]
  questionTypes: QuestionTypeSummary[]
}

interface QuestionTypeSummary {
  type: QuestionType
  typeName: string
  count: number
  totalScore: number
}
```

### 6.3 é¢˜ç›®æ•°æ®ï¼ˆQuestionï¼‰

```typescript
type QuestionType = 'single' | 'multiple' | 'trueFalse' | 'fillBlank' | 'shortAnswer' | 'cloze' | 'composite'

interface BaseQuestion {
  id: string
  type: QuestionType
  order: number
  content: string
  score: number
  explanation?: string
}

// å•é€‰é¢˜
interface SingleChoiceQuestion extends BaseQuestion {
  type: 'single'
  options: Option[]
  correctAnswer: string
}

// å¤šé€‰é¢˜
interface MultipleChoiceQuestion extends BaseQuestion {
  type: 'multiple'
  options: Option[]
  correctAnswer: string[]
}

// åˆ¤æ–­é¢˜
interface TrueFalseQuestion extends BaseQuestion {
  type: 'trueFalse'
  correctAnswer: boolean
}

// å¡«ç©ºé¢˜
interface FillBlankQuestion extends BaseQuestion {
  type: 'fillBlank'
  blanks: number
  correctAnswer: string[]
}

// ç®€ç­”é¢˜
interface ShortAnswerQuestion extends BaseQuestion {
  type: 'shortAnswer'
  correctAnswer?: string
}

// å®Œå½¢å¡«ç©º
interface ClozeQuestion extends BaseQuestion {
  type: 'cloze'
  blanks: ClozeBlank[]
}

interface ClozeBlank {
  order: number
  options: Option[]
  correctAnswer: string
}

// å¤åˆé¢˜
interface CompositeQuestion extends BaseQuestion {
  type: 'composite'
  material: string
  subQuestions: Question[]
}

interface Option {
  label: string
  text: string
}
```

### 6.4 ç­”æ¡ˆæ•°æ®ï¼ˆAnswerï¼‰

```typescript
interface AnswerData {
  examId: string
  paperId: string
  studentId: string
  answers: Record<string, any>  // questionId -> answer
  marked: string[]  // æ ‡è®°çš„é¢˜ç›®IDåˆ—è¡¨
  startTime: string
  submitTime?: string
  duration?: number  // ç­”é¢˜ç”¨æ—¶ï¼ˆåˆ†é’Ÿï¼‰
}

// ä¸åŒé¢˜å‹çš„ç­”æ¡ˆæ ¼å¼
type SingleAnswer = string  // 'A'
type MultipleAnswer = string[]  // ['A', 'B', 'D']
type TrueFalseAnswer = boolean  // true | false
type FillBlankAnswer = string[]  // ['ç­”æ¡ˆ1', 'ç­”æ¡ˆ2']
type ShortAnswer = {
  text: string
  files?: string[]  // é™„ä»¶URLåˆ—è¡¨
}
type ClozeAnswer = string[]  // ['A', 'C', 'B']
type CompositeAnswer = Record<string, any>  // subQuestionId -> answer
```

---

## APIæ¥å£è®¾è®¡

### 7.1 è€ƒè¯•ç›¸å…³æ¥å£

**è·å–è€ƒè¯•åˆ—è¡¨**
```
GET /api/student/exams
Query: status (å¯é€‰)

Response:
{
  code: 0,
  data: {
    exams: Exam[]
  }
}
```

**è·å–è€ƒè¯•è¯¦æƒ…**
```
GET /api/student/exams/:id

Response:
{
  code: 0,
  data: {
    exam: Exam
  }
}
```

**è·å–è¯•å·æ•°æ®**
```
GET /api/student/exams/:examId/paper

Response:
{
  code: 0,
  data: {
    paper: Paper,
    myAnswers: AnswerData | null  // å¦‚æœå·²å¼€å§‹ç­”é¢˜
  }
}
```

### 7.2 ç­”é¢˜ç›¸å…³æ¥å£

**å¼€å§‹ç­”é¢˜**
```
POST /api/student/exams/:examId/start

Response:
{
  code: 0,
  data: {
    answerId: string,
    startTime: string
  }
}
```

**ä¿å­˜ç­”æ¡ˆï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰**
```
POST /api/student/exams/:examId/save-answer
Body: {
  questionId: string,
  answer: any
}

Response:
{
  code: 0,
  message: 'success'
}
```

**æ‰¹é‡åŒæ­¥ç­”æ¡ˆ**
```
POST /api/student/exams/:examId/sync-answers
Body: {
  answers: Record<string, any>,
  marked: string[]
}

Response:
{
  code: 0,
  message: 'success'
}
```

**æäº¤è¯•å·**
```
POST /api/student/exams/:examId/submit
Body: {
  answers: Record<string, any>,
  duration: number
}

Response:
{
  code: 0,
  data: {
    submitTime: string,
    objectiveScore: number  // å®¢è§‚é¢˜å¾—åˆ†ï¼ˆç«‹å³åˆ¤åˆ†ï¼‰
  }
}
```

### 7.3 æˆç»©ç›¸å…³æ¥å£

**è·å–è€ƒè¯•æˆç»©**
```
GET /api/student/exams/:examId/result

Response:
{
  code: 0,
  data: {
    totalScore: number,
    fullScore: number,
    objectiveScore: number,
    subjectiveScore: number,
    rank: {
      class: { rank: number, total: number },
      grade: { rank: number, total: number }
    },
    duration: number,
    publishTime: string
  }
}
```

**è·å–æ‰¹é˜…è¯¦æƒ…**
```
GET /api/student/exams/:examId/review

Response:
{
  code: 0,
  data: {
    questions: ReviewQuestion[],
    statistics: {
      total: number,
      correct: number,
      wrong: number,
      unanswered: number
    }
  }
}
```

### 7.4 äººè„¸è¯†åˆ«æ¥å£

**ä¸Šä¼ äººè„¸ç…§ç‰‡**
```
POST /api/student/exams/:examId/face-verify
Body: FormData {
  image: File
}

Response:
{
  code: 0,
  data: {
    success: boolean,
    similarity: number,  // ç›¸ä¼¼åº¦
    message: string
  }
}
```

---
## çŠ¶æ€ç®¡ç†è®¾è®¡

### 8.1 Exam Storeï¼ˆstores/exam.jsï¼‰

**èŒè´£**: ç®¡ç†è€ƒè¯•åˆ—è¡¨å’Œå½“å‰è€ƒè¯•ä¿¡æ¯

```javascript
import { defineStore } from 'pinia'
import { getExamList, getExamDetail, getPaper } from '@/api/exam'

export const useExamStore = defineStore('exam', {
  state: () => ({
    examList: [],  // è€ƒè¯•åˆ—è¡¨
    currentExam: null,  // å½“å‰è€ƒè¯•
    currentPaper: null,  // å½“å‰è¯•å·
    loading: false
  }),
  
  getters: {
    // æŒ‰çŠ¶æ€ç­›é€‰è€ƒè¯•
    examsByStatus: (state) => (status) => {
      if (!status) return state.examList
      return state.examList.filter(exam => exam.status === status)
    },
    
    // å½“å‰è€ƒè¯•æ˜¯å¦å¯ä»¥å¼€å§‹
    canStartExam: (state) => {
      if (!state.currentExam) return false
      return state.currentExam.status === 'in_progress' &&
             state.currentExam.myStatus === 'not_started'
    }
  },
  
  actions: {
    // è·å–è€ƒè¯•åˆ—è¡¨
    async fetchExamList() {
      this.loading = true
      try {
        const res = await getExamList()
        this.examList = res.data.exams
      } finally {
        this.loading = false
      }
    },
    
    // è·å–è€ƒè¯•è¯¦æƒ…
    async fetchExamDetail(examId) {
      this.loading = true
      try {
        const res = await getExamDetail(examId)
        this.currentExam = res.data.exam
      } finally {
        this.loading = false
      }
    },
    
    // è·å–è¯•å·æ•°æ®
    async fetchPaper(examId) {
      this.loading = true
      try {
        const res = await getPaper(examId)
        this.currentPaper = res.data.paper
        return res.data.myAnswers  // è¿”å›å·²æœ‰ç­”æ¡ˆï¼ˆå¦‚æœæœ‰ï¼‰
      } finally {
        this.loading = false
      }
    }
  }
})
```

### 8.2 Answer Storeï¼ˆstores/answer.jsï¼‰

**èŒè´£**: ç®¡ç†ç­”é¢˜çŠ¶æ€å’Œç­”æ¡ˆæ•°æ®

```javascript
import { defineStore } from 'pinia'
import { saveAnswer, syncAnswers, submitPaper } from '@/api/answer'
import { saveToLocal, loadFromLocal } from '@/utils/storage'

export const useAnswerStore = defineStore('answer', {
  state: () => ({
    examId: null,
    paperId: null,
    answers: {},  // questionId -> answer
    marked: [],  // æ ‡è®°çš„é¢˜ç›®ID
    currentQuestionIndex: 0,  // å½“å‰é¢˜ç›®ç´¢å¼•
    startTime: null,
    remainingTime: 0,  // å‰©ä½™ç§’æ•°
    autoSaveTimer: null,
    countdownTimer: null
  }),
  
  getters: {
    // å·²ç­”é¢˜ç›®æ•°é‡
    answeredCount: (state) => {
      return Object.keys(state.answers).length
    },
    
    // ç­”é¢˜è¿›åº¦ç™¾åˆ†æ¯”
    progress: (state) => {
      const total = state.questions?.length || 0
      if (total === 0) return 0
      return Math.round((this.answeredCount / total) * 100)
    },
    
    // å½“å‰é¢˜ç›®æ˜¯å¦å·²ç­”
    isCurrentAnswered: (state) => {
      const questionId = state.questions?.[state.currentQuestionIndex]?.id
      return questionId && state.answers[questionId] !== undefined
    },
    
    // å½“å‰é¢˜ç›®æ˜¯å¦å·²æ ‡è®°
    isCurrentMarked: (state) => {
      const questionId = state.questions?.[state.currentQuestionIndex]?.id
      return questionId && state.marked.includes(questionId)
    }
  },
  
  actions: {
    // åˆå§‹åŒ–ç­”é¢˜
    initAnswer(examId, paperId, questions, existingAnswers = null) {
      this.examId = examId
      this.paperId = paperId
      this.questions = questions
      this.startTime = new Date().toISOString()
      
      // åŠ è½½å·²æœ‰ç­”æ¡ˆï¼ˆä»æœåŠ¡å™¨æˆ–æœ¬åœ°ï¼‰
      if (existingAnswers) {
        this.answers = existingAnswers.answers || {}
        this.marked = existingAnswers.marked || []
        this.startTime = existingAnswers.startTime
      } else {
        // å°è¯•ä»æœ¬åœ°åŠ è½½
        const localData = loadFromLocal(`exam_${examId}`)
        if (localData) {
          this.answers = localData.answers || {}
          this.marked = localData.marked || []
        }
      }
      
      // å¯åŠ¨è‡ªåŠ¨ä¿å­˜
      this.startAutoSave()
      
      // å¯åŠ¨å€’è®¡æ—¶
      this.startCountdown()
    },
    
    // ä¿å­˜ç­”æ¡ˆ
    saveAnswer(questionId, answer) {
      this.answers[questionId] = answer
      
      // ä¿å­˜åˆ°æœ¬åœ°
      this.saveToLocal()
      
      // ç«‹å³åŒæ­¥åˆ°æœåŠ¡å™¨
      saveAnswer(this.examId, questionId, answer)
    },
    
    // æ ‡è®°/å–æ¶ˆæ ‡è®°é¢˜ç›®
    toggleMark(questionId) {
      const index = this.marked.indexOf(questionId)
      if (index > -1) {
        this.marked.splice(index, 1)
      } else {
        this.marked.push(questionId)
      }
      this.saveToLocal()
    },
    
    // ä¿å­˜åˆ°æœ¬åœ°
    saveToLocal() {
      saveToLocal(`exam_${this.examId}`, {
        answers: this.answers,
        marked: this.marked,
        startTime: this.startTime,
        lastSaveTime: new Date().toISOString()
      })
    },
    
    // å¯åŠ¨è‡ªåŠ¨ä¿å­˜ï¼ˆæ¯30ç§’åŒæ­¥åˆ°æœåŠ¡å™¨ï¼‰
    startAutoSave() {
      this.autoSaveTimer = setInterval(() => {
        syncAnswers(this.examId, {
          answers: this.answers,
          marked: this.marked
        })
      }, 30000)
    },
    
    // å¯åŠ¨å€’è®¡æ—¶
    startCountdown() {
      this.countdownTimer = setInterval(() => {
        this.remainingTime--
        
        if (this.remainingTime <= 0) {
          this.autoSubmit()  // æ—¶é—´åˆ°è‡ªåŠ¨äº¤å·
        } else if (this.remainingTime === 300) {
          // å‰©ä½™5åˆ†é’Ÿæé†’
          showNotify({ type: 'warning', message: 'å‰©ä½™5åˆ†é’Ÿï¼Œè¯·æŠ“ç´§æ—¶é—´ï¼' })
        }
      }, 1000)
    },
    
    // æäº¤è¯•å·
    async submit() {
      // åœæ­¢å®šæ—¶å™¨
      clearInterval(this.autoSaveTimer)
      clearInterval(this.countdownTimer)
      
      // è®¡ç®—ç­”é¢˜æ—¶é•¿
      const duration = Math.floor((Date.now() - new Date(this.startTime)) / 60000)
      
      // æäº¤åˆ°æœåŠ¡å™¨
      const res = await submitPaper(this.examId, {
        answers: this.answers,
        duration
      })
      
      // æ¸…é™¤æœ¬åœ°æ•°æ®
      localStorage.removeItem(`exam_${this.examId}`)
      
      return res.data
    },
    
    // è‡ªåŠ¨äº¤å·
    async autoSubmit() {
      showDialog({
        title: 'è€ƒè¯•æ—¶é—´å·²åˆ°',
        message: 'ç³»ç»Ÿæ­£åœ¨è‡ªåŠ¨æäº¤æ‚¨çš„ç­”å·...',
        showConfirmButton: false
      })
      
      await this.submit()
      
      // è·³è½¬åˆ°æˆç»©é¡µé¢
      router.push(`/exam/result/${this.examId}`)
    }
  }
})
```

### 8.3 User Storeï¼ˆstores/user.jsï¼‰

**èŒè´£**: ç®¡ç†ç”¨æˆ·ä¿¡æ¯å’Œç™»å½•çŠ¶æ€

```javascript
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null,
    token: null
  }),
  
  getters: {
    isLoggedIn: (state) => !!state.token
  },
  
  actions: {
    setUserInfo(userInfo) {
      this.userInfo = userInfo
    },
    
    setToken(token) {
      this.token = token
      localStorage.setItem('token', token)
    },
    
    logout() {
      this.userInfo = null
      this.token = null
      localStorage.removeItem('token')
    }
  }
})
```

---
## æŠ€æœ¯å®ç°è¦ç‚¹

### 9.1 ç§»åŠ¨ç«¯é€‚é…

**Viewport é…ç½®**:
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
```

**Rem é€‚é…**:
```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import Components from 'unplugin-vue-components/vite'
import { VantResolver } from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
    vue(),
    Components({
      resolvers: [VantResolver()]
    })
  ],
  css: {
    postcss: {
      plugins: [
        require('postcss-pxtorem')({
          rootValue: 37.5,
          propList: ['*']
        })
      ]
    }
  }
})
```

### 9.2 æ€§èƒ½ä¼˜åŒ–

**1. è·¯ç”±æ‡’åŠ è½½**:
```javascript
const routes = [
  {
    path: '/exam/list',
    component: () => import('@/views/exam/ExamList.vue')
  }
]
```

**2. é¢˜ç›®è™šæ‹Ÿæ»šåŠ¨**ï¼ˆå¤§é¢˜é‡è¯•å·ï¼‰:
```vue
<template>
  <van-list
    v-model:loading="loading"
    :finished="finished"
    @load="onLoad"
  >
    <QuestionCard
      v-for="question in visibleQuestions"
      :key="question.id"
      :question="question"
    />
  </van-list>
</template>
```

**3. å›¾ç‰‡æ‡’åŠ è½½**:
```vue
<van-image
  lazy-load
  :src="imageUrl"
/>
```

### 9.3 ç¦»çº¿å®¹é”™

**ç½‘ç»œçŠ¶æ€ç›‘å¬**:
```javascript
// utils/network.js
export const setupNetworkListener = () => {
  window.addEventListener('offline', () => {
    showToast('ç½‘ç»œå·²æ–­å¼€ï¼Œç­”æ¡ˆå°†ä¿å­˜åœ¨æœ¬åœ°')
  })
  
  window.addEventListener('online', () => {
    showToast('ç½‘ç»œå·²æ¢å¤ï¼Œæ­£åœ¨åŒæ­¥ç­”æ¡ˆ...')
    // åŒæ­¥æœ¬åœ°ç­”æ¡ˆåˆ°æœåŠ¡å™¨
    syncLocalAnswers()
  })
}
```

**ç­”æ¡ˆæœ¬åœ°ç¼“å­˜**:
```javascript
// utils/storage.js
export const saveToLocal = (key, data) => {
  try {
    localStorage.setItem(key, JSON.stringify(data))
  } catch (e) {
    console.error('ä¿å­˜å¤±è´¥', e)
  }
}

export const loadFromLocal = (key) => {
  try {
    const data = localStorage.getItem(key)
    return data ? JSON.parse(data) : null
  } catch (e) {
    console.error('åŠ è½½å¤±è´¥', e)
    return null
  }
}
```

### 9.4 å®‰å…¨æªæ–½

**1. é˜²æ­¢é¡µé¢åˆ·æ–°ä¸¢å¤±æ•°æ®**:
```javascript
// ç›‘å¬é¡µé¢åˆ·æ–°
window.addEventListener('beforeunload', (e) => {
  if (isAnswering) {
    e.preventDefault()
    e.returnValue = 'ç­”é¢˜æ•°æ®å°šæœªæäº¤ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ'
  }
})
```

**2. é˜²æ­¢åˆ‡æ¢åº”ç”¨**ï¼ˆå¦‚æœé…ç½®äº†é”å®šè¯•å·ï¼‰:
```javascript
// ç›‘å¬é¡µé¢å¯è§æ€§å˜åŒ–
document.addEventListener('visibilitychange', () => {
  if (document.hidden && examConfig.lockPaper) {
    // è®°å½•åˆ‡å±è¡Œä¸º
    recordSwitchApp()
    
    // è­¦å‘Šæˆ–å¼ºåˆ¶äº¤å·
    if (switchCount >= 3) {
      forceSubmit()
    }
  }
})
```

**3. Token è®¤è¯**:
```javascript
// utils/request.js
import axios from 'axios'
import { useUserStore } from '@/stores/user'

const request = axios.create({
  baseURL: '/api',
  timeout: 10000
})

request.interceptors.request.use(config => {
  const userStore = useUserStore()
  if (userStore.token) {
    config.headers.Authorization = `Bearer ${userStore.token}`
  }
  return config
})

export default request
```

### 9.5 è°ƒè¯•å·¥å…·

**æ¡Œé¢ç«¯è°ƒè¯•æ”¯æŒ**:
```javascript
// main.js
import { createApp } from 'vue'
import App from './App.vue'

// æ¡Œé¢ç«¯æ¨¡æ‹Ÿè§¦æ‘¸äº‹ä»¶
if (!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
  import('@vant/touch-emulator')
}

createApp(App).mount('#app')
```

**VConsole ç§»åŠ¨ç«¯è°ƒè¯•**:
```javascript
// å¼€å‘ç¯å¢ƒå¯ç”¨ VConsole
if (import.meta.env.DEV) {
  import('vconsole').then(module => {
    new module.default()
  })
}
```

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

### 10.1 å®æ–½æ­¥éª¤

**é˜¶æ®µ1ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆ1å¤©ï¼‰**
- âœ… åˆ›å»º Vue 3 + Vite é¡¹ç›®
- âœ… å®‰è£…ä¾èµ–ï¼ˆVantã€Piniaã€Vue Routerï¼‰
- âœ… é…ç½® Viteï¼ˆè‡ªåŠ¨å¼•å…¥ã€Remé€‚é…ï¼‰
- âœ… åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
- âœ… é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†

**é˜¶æ®µ2ï¼šåŸºç¡€é¡µé¢å¼€å‘ï¼ˆ2-3å¤©ï¼‰**
- âœ… è€ƒè¯•åˆ—è¡¨é¡µé¢
- âœ… è€ƒè¯•è¯¦æƒ…é¡µé¢
- âœ… äººè„¸è¯†åˆ«é¡µé¢ï¼ˆæ¨¡æ‹Ÿå®ç°ï¼‰

**é˜¶æ®µ3ï¼šæ ¸å¿ƒç­”é¢˜åŠŸèƒ½ï¼ˆ3-4å¤©ï¼‰**
- âœ… ç­”é¢˜é¡µé¢æ¡†æ¶
- âœ… 7ç§é¢˜å‹ç»„ä»¶å¼€å‘
- âœ… ç­”é¢˜å¡ç»„ä»¶
- âœ… å€’è®¡æ—¶ç»„ä»¶
- âœ… ç­”æ¡ˆä¿å­˜å’ŒåŒæ­¥
- âœ… äº¤å·ç¡®è®¤é€»è¾‘

**é˜¶æ®µ4ï¼šæˆç»©å’Œæ‰¹é˜…ï¼ˆ2å¤©ï¼‰**
- âœ… è€ƒè¯•æˆç»©é¡µé¢
- âœ… æ‰¹é˜…è¯¦æƒ…é¡µé¢
- âœ… ç­”æ¡ˆè§£æå±•ç¤º

**é˜¶æ®µ5ï¼šä¼˜åŒ–å’Œæµ‹è¯•ï¼ˆ2å¤©ï¼‰**
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… ç¦»çº¿å®¹é”™æµ‹è¯•
- âœ… å„ç§è¾¹ç•Œæƒ…å†µæµ‹è¯•
- âœ… ç§»åŠ¨ç«¯çœŸæœºæµ‹è¯•

**æ€»è®¡ï¼š10-12å¤©**

### 10.2 æŠ€æœ¯éš¾ç‚¹

| éš¾ç‚¹ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| å¤§é¢˜é‡è¯•å·æ€§èƒ½ | è™šæ‹Ÿæ»šåŠ¨ + æ‡’åŠ è½½ |
| ç½‘ç»œæ–­å¼€æ•°æ®ä¸¢å¤± | LocalStorage ç¼“å­˜ + è‡ªåŠ¨åŒæ­¥ |
| äººè„¸è¯†åˆ«å®ç° | åŸå‹é˜¶æ®µæ¨¡æ‹Ÿï¼Œé¢„ç•™çœŸå®SDKæ¥å£ |
| å¤åˆé¢˜æ¸²æŸ“ | é€’å½’ç»„ä»¶ + åŠ¨æ€ç»„ä»¶ |
| å€’è®¡æ—¶ç²¾ç¡®æ€§ | æœåŠ¡å™¨æ—¶é—´æ ¡å‡† + æœ¬åœ°å€’è®¡æ—¶ |

### 10.3 åç»­æ‰©å±•

**åŠŸèƒ½æ‰©å±•**:
- åˆ·é¢˜åŠŸèƒ½æ¨¡å—
- é”™é¢˜æœ¬åŠŸèƒ½
- çº é”™åé¦ˆåŠŸèƒ½
- è€ƒè¯•å†å²è®°å½•
- æˆç»©è¶‹åŠ¿åˆ†æ

**æŠ€æœ¯ä¼˜åŒ–**:
- PWA æ”¯æŒï¼ˆç¦»çº¿å¯ç”¨ï¼‰
- WebSocket å®æ—¶é€šä¿¡ï¼ˆç›‘è€ƒæ¶ˆæ¯æ¨é€ï¼‰
- çœŸå®äººè„¸è¯†åˆ«SDKé›†æˆ
- å›¾ç‰‡å‹ç¼©å’Œä¸Šä¼ ä¼˜åŒ–
- ç­”é¢˜æ•°æ®åŠ å¯†ä¼ è¾“

---

## é™„å½•

### A. å‚è€ƒæ–‡æ¡£

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/)
- [Vant 4 ç»„ä»¶åº“](https://vant-ui.github.io/vant/)
- [Pinia çŠ¶æ€ç®¡ç†](https://pinia.vuejs.org/zh/)
- [è€ƒè¯•ç³»ç»ŸåŠŸèƒ½æ¸…å•](../../è€ƒè¯•ç³»ç»ŸåŠŸèƒ½æ¸…å•.md)

### B. è®¾è®¡åŸåˆ™

1. **ç§»åŠ¨ä¼˜å…ˆ**: æ‰€æœ‰è®¾è®¡ä»ç§»åŠ¨ç«¯å‡ºå‘
2. **ç”¨æˆ·ä½“éªŒ**: æµç•…çš„äº¤äº’ï¼Œæ¸…æ™°çš„å¼•å¯¼
3. **æ•°æ®å®‰å…¨**: å¤šé‡ä¿éšœï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
4. **æ€§èƒ½ä¼˜å…ˆ**: å¤§é¢˜é‡ä¸‹ä¾ç„¶æµç•…
5. **å¯æ‰©å±•æ€§**: é¢„ç•™æ¥å£ï¼Œä¾¿äºåç»­æ‰©å±•

### C. å‘½åè§„èŒƒ

**æ–‡ä»¶å‘½å**: PascalCaseï¼ˆå¤§é©¼å³°ï¼‰
- `ExamList.vue`
- `ExamDetail.vue`

**ç»„ä»¶å‘½å**: PascalCase
- `<QuestionCard />`
- `<AnswerSheet />`

**å˜é‡å‘½å**: camelCaseï¼ˆå°é©¼å³°ï¼‰
- `examList`
- `currentQuestion`

**å¸¸é‡å‘½å**: UPPER_SNAKE_CASE
- `MAX_RETRY_COUNT`
- `AUTO_SAVE_INTERVAL`

---

**æ–‡æ¡£ç»“æŸ**

> å¦‚éœ€è¡¥å……æˆ–ä¿®æ”¹ï¼Œè¯·è”ç³»é¡¹ç›®è´Ÿè´£äºº
