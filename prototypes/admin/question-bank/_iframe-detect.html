<!-- iframe嵌入检测脚本 - 添加到</body>标签前 -->
<script>
(function() {
  // 检测是否在iframe中
  function isInIframe() {
    try {
      return window.self !== window.top;
    } catch (e) {
      return true;
    }
  }

  // 检测URL参数
  function hasEmbeddedParam() {
    return window.location.search.includes('embedded=true');
  }

  // 如果在iframe中，隐藏header和返回按钮
  if (isInIframe() || hasEmbeddedParam()) {
    // 添加样式来隐藏元素
    const style = document.createElement('style');
    style.textContent = `
      header { display: none !important; }
      .pt-16 { padding-top: 0 !important; }
      button[onclick*="history.back"] { display: none !important; }
    `;
    document.head.appendChild(style);

    // DOM加载后再次确保隐藏
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', hideElements);
    } else {
      hideElements();
    }

    function hideElements() {
      // 隐藏header
      const headers = document.querySelectorAll('header');
      headers.forEach(h => h.style.display = 'none');

      // 移除pt-16
      const ptElements = document.querySelectorAll('.pt-16');
      ptElements.forEach(el => {
        el.classList.remove('pt-16');
        el.style.paddingTop = '0';
      });

      // 隐藏返回按钮
      const backButtons = document.querySelectorAll('button[onclick*="history.back"]');
      backButtons.forEach(btn => btn.style.display = 'none');
    }
  }
})();
</script>
