<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>知识点分类管理 - 题库管理</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: { 50: '#E6F9F0', 500: '#00B96B', 600: '#00A35C' },
            success: { 50: '#E8FFEA', 500: '#00B42A' },
            warning: { 50: '#FFF7E8', 500: '#FF7D00' },
            error: { 50: '#FFECE8', 500: '#F53F3F' },
            info: { 50: '#E8F7FF', 500: '#14C9C9' }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  <!-- 顶部导航 -->
  <header class="h-16 bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
    <div class="flex items-center justify-between h-full px-6 max-w-7xl mx-auto">
      <div class="flex items-center space-x-4">
        <button onclick="history.back()" class="w-8 h-8 flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded">
          <i class="fas fa-arrow-left"></i>
        </button>
        <div>
          <h1 class="text-lg font-semibold text-gray-900">知识点分类管理</h1>
          <p class="text-xs text-gray-500">管理题目的知识点分类体系</p>
        </div>
      </div>
      <div class="flex items-center space-x-3">
        <button onclick="expandAll()" class="bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-4 py-2 rounded font-medium text-sm">
          <i class="fas fa-plus-square mr-2"></i>全部展开
        </button>
        <button onclick="addRootCategory()" class="bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded font-medium text-sm">
          <i class="fas fa-plus mr-2"></i>添加一级分类
        </button>
      </div>
    </div>
  </header>

  <div class="pt-16">
    <div class="max-w-7xl mx-auto p-6">
      <div class="grid grid-cols-12 gap-6">
        <!-- 左侧树形结构 -->
        <div class="col-span-5 bg-white rounded-lg border border-gray-200 shadow-sm">
          <!-- 搜索栏 -->
          <div class="p-4 border-b border-gray-200">
            <div class="relative">
              <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
              <input type="text" class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary-500" placeholder="搜索知识点...">
            </div>
          </div>

          <!-- 树形列表 -->
          <div class="p-4 overflow-y-auto" style="max-height: calc(100vh - 220px);">
            <!-- 一级分类：计算机基础 -->
            <div class="mb-2">
              <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group" onclick="toggleCategory('category1')">
                <div class="flex items-center flex-1">
                  <i class="fas fa-chevron-down text-gray-400 mr-2" id="icon-category1"></i>
                  <i class="fas fa-folder text-warning-500 mr-2"></i>
                  <span class="text-sm font-medium text-gray-900">计算机基础</span>
                  <span class="ml-2 text-xs text-gray-500">(156题)</span>
                </div>
                <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button onclick="editCategory(event, 'category1')" class="text-gray-400 hover:text-primary-600" title="编辑">
                    <i class="fas fa-edit text-sm"></i>
                  </button>
                  <button onclick="addSubCategory(event, 'category1')" class="text-gray-400 hover:text-success-600" title="添加子分类">
                    <i class="fas fa-plus text-sm"></i>
                  </button>
                  <button onclick="deleteCategory(event, 'category1')" class="text-gray-400 hover:text-error-600" title="删除">
                    <i class="fas fa-trash text-sm"></i>
                  </button>
                </div>
              </div>

              <!-- 二级分类 -->
              <div id="category1" class="ml-6">
                <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group" onclick="selectCategory('sub1')">
                  <div class="flex items-center flex-1">
                    <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                    <i class="fas fa-folder-open text-info-500 mr-2"></i>
                    <span class="text-sm text-gray-700">操作系统</span>
                    <span class="ml-2 text-xs text-gray-500">(85题)</span>
                  </div>
                  <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button onclick="editCategory(event, 'sub1')" class="text-gray-400 hover:text-primary-600">
                      <i class="fas fa-edit text-sm"></i>
                    </button>
                    <button onclick="addSubCategory(event, 'sub1')" class="text-gray-400 hover:text-success-600">
                      <i class="fas fa-plus text-sm"></i>
                    </button>
                    <button onclick="deleteCategory(event, 'sub1')" class="text-gray-400 hover:text-error-600">
                      <i class="fas fa-trash text-sm"></i>
                    </button>
                  </div>
                </div>

                <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group" onclick="selectCategory('sub2')">
                  <div class="flex items-center flex-1">
                    <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                    <i class="fas fa-folder-open text-info-500 mr-2"></i>
                    <span class="text-sm text-gray-700">网络原理</span>
                    <span class="ml-2 text-xs text-gray-500">(52题)</span>
                  </div>
                  <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button onclick="editCategory(event, 'sub2')" class="text-gray-400 hover:text-primary-600">
                      <i class="fas fa-edit text-sm"></i>
                    </button>
                    <button onclick="addSubCategory(event, 'sub2')" class="text-gray-400 hover:text-success-600">
                      <i class="fas fa-plus text-sm"></i>
                    </button>
                    <button onclick="deleteCategory(event, 'sub2')" class="text-gray-400 hover:text-error-600">
                      <i class="fas fa-trash text-sm"></i>
                    </button>
                  </div>
                </div>

                <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group" onclick="selectCategory('sub3')">
                  <div class="flex items-center flex-1">
                    <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                    <i class="fas fa-folder-open text-info-500 mr-2"></i>
                    <span class="text-sm text-gray-700">数据结构</span>
                    <span class="ml-2 text-xs text-gray-500">(19题)</span>
                  </div>
                  <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button onclick="editCategory(event, 'sub3')" class="text-gray-400 hover:text-primary-600">
                      <i class="fas fa-edit text-sm"></i>
                    </button>
                    <button onclick="addSubCategory(event, 'sub3')" class="text-gray-400 hover:text-success-600">
                      <i class="fas fa-plus text-sm"></i>
                    </button>
                    <button onclick="deleteCategory(event, 'sub3')" class="text-gray-400 hover:text-error-600">
                      <i class="fas fa-trash text-sm"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 一级分类：数学 -->
            <div class="mb-2">
              <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group" onclick="toggleCategory('category2')">
                <div class="flex items-center flex-1">
                  <i class="fas fa-chevron-right text-gray-400 mr-2" id="icon-category2"></i>
                  <i class="fas fa-folder text-warning-500 mr-2"></i>
                  <span class="text-sm font-medium text-gray-900">数学</span>
                  <span class="ml-2 text-xs text-gray-500">(243题)</span>
                </div>
                <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button onclick="editCategory(event, 'category2')" class="text-gray-400 hover:text-primary-600">
                    <i class="fas fa-edit text-sm"></i>
                  </button>
                  <button onclick="addSubCategory(event, 'category2')" class="text-gray-400 hover:text-success-600">
                    <i class="fas fa-plus text-sm"></i>
                  </button>
                  <button onclick="deleteCategory(event, 'category2')" class="text-gray-400 hover:text-error-600">
                    <i class="fas fa-trash text-sm"></i>
                  </button>
                </div>
              </div>

              <div id="category2" style="display: none;" class="ml-6">
                <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group">
                  <div class="flex items-center flex-1">
                    <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                    <i class="fas fa-folder-open text-info-500 mr-2"></i>
                    <span class="text-sm text-gray-700">代数</span>
                    <span class="ml-2 text-xs text-gray-500">(128题)</span>
                  </div>
                  <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button class="text-gray-400 hover:text-primary-600">
                      <i class="fas fa-edit text-sm"></i>
                    </button>
                    <button class="text-gray-400 hover:text-success-600">
                      <i class="fas fa-plus text-sm"></i>
                    </button>
                    <button class="text-gray-400 hover:text-error-600">
                      <i class="fas fa-trash text-sm"></i>
                    </button>
                  </div>
                </div>

                <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group">
                  <div class="flex items-center flex-1">
                    <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                    <i class="fas fa-folder-open text-info-500 mr-2"></i>
                    <span class="text-sm text-gray-700">几何</span>
                    <span class="ml-2 text-xs text-gray-500">(115题)</span>
                  </div>
                  <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                    <button class="text-gray-400 hover:text-primary-600">
                      <i class="fas fa-edit text-sm"></i>
                    </button>
                    <button class="text-gray-400 hover:text-success-600">
                      <i class="fas fa-plus text-sm"></i>
                    </button>
                    <button class="text-gray-400 hover:text-error-600">
                      <i class="fas fa-trash text-sm"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 一级分类：英语 -->
            <div class="mb-2">
              <div class="flex items-center justify-between p-3 hover:bg-gray-50 rounded cursor-pointer group">
                <div class="flex items-center flex-1">
                  <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                  <i class="fas fa-folder text-warning-500 mr-2"></i>
                  <span class="text-sm font-medium text-gray-900">英语</span>
                  <span class="ml-2 text-xs text-gray-500">(189题)</span>
                </div>
                <div class="flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button class="text-gray-400 hover:text-primary-600">
                    <i class="fas fa-edit text-sm"></i>
                  </button>
                  <button class="text-gray-400 hover:text-success-600">
                    <i class="fas fa-plus text-sm"></i>
                  </button>
                  <button class="text-gray-400 hover:text-error-600">
                    <i class="fas fa-trash text-sm"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 右侧详情区 -->
        <div class="col-span-7 bg-white rounded-lg border border-gray-200 shadow-sm p-6">
          <div class="text-center py-12" id="emptyState">
            <i class="fas fa-folder-open text-5xl text-gray-300 mb-4"></i>
            <p class="text-sm text-gray-500">请从左侧选择知识点查看详情</p>
          </div>

          <!-- 详情内容（选中后显示） -->
          <div id="detailContent" style="display: none;">
            <!-- 基本信息 -->
            <div class="mb-6">
              <div class="flex items-start justify-between mb-4">
                <div class="flex items-center space-x-3">
                  <i class="fas fa-folder-open text-2xl text-info-500"></i>
                  <div>
                    <h2 class="text-xl font-semibold text-gray-900">操作系统</h2>
                    <p class="text-sm text-gray-500 mt-1">知识点编号: yunti001</p>
                  </div>
                </div>
                <button onclick="editCategoryDetail()" class="bg-primary-50 hover:bg-primary-100 text-primary-600 px-4 py-2 rounded text-sm font-medium">
                  <i class="fas fa-edit mr-2"></i>编辑
                </button>
              </div>

              <div class="grid grid-cols-3 gap-4">
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-xs text-gray-500 mb-1">题目总数</p>
                  <p class="text-2xl font-semibold text-gray-900">85</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-xs text-gray-500 mb-1">子分类数</p>
                  <p class="text-2xl font-semibold text-gray-900">0</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-xs text-gray-500 mb-1">上级分类</p>
                  <p class="text-sm font-medium text-gray-900 mt-1">计算机基础</p>
                </div>
              </div>
            </div>

            <!-- 题型分布 -->
            <div class="mb-6">
              <h3 class="text-base font-semibold text-gray-900 mb-3">题型分布</h3>
              <div class="space-y-3">
                <div>
                  <div class="flex items-center justify-between text-sm mb-1">
                    <span class="text-gray-600">单选题</span>
                    <span class="font-medium text-gray-900">45 题 (52.9%)</span>
                  </div>
                  <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-success-500 rounded-full" style="width: 52.9%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center justify-between text-sm mb-1">
                    <span class="text-gray-600">多选题</span>
                    <span class="font-medium text-gray-900">20 题 (23.5%)</span>
                  </div>
                  <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-primary-500 rounded-full" style="width: 23.5%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center justify-between text-sm mb-1">
                    <span class="text-gray-600">判断题</span>
                    <span class="font-medium text-gray-900">12 题 (14.1%)</span>
                  </div>
                  <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-info-500 rounded-full" style="width: 14.1%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center justify-between text-sm mb-1">
                    <span class="text-gray-600">简答题</span>
                    <span class="font-medium text-gray-900">8 题 (9.4%)</span>
                  </div>
                  <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-warning-500 rounded-full" style="width: 9.4%"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 难度分布 -->
            <div class="mb-6">
              <h3 class="text-base font-semibold text-gray-900 mb-3">难度分布</h3>
              <div class="grid grid-cols-3 gap-4">
                <div class="bg-success-50 rounded-lg p-4 text-center">
                  <p class="text-xs text-gray-600 mb-1">简单</p>
                  <p class="text-2xl font-semibold text-success-600">32</p>
                  <p class="text-xs text-gray-500 mt-1">37.6%</p>
                </div>
                <div class="bg-warning-50 rounded-lg p-4 text-center">
                  <p class="text-xs text-gray-600 mb-1">中等</p>
                  <p class="text-2xl font-semibold text-warning-600">38</p>
                  <p class="text-xs text-gray-500 mt-1">44.7%</p>
                </div>
                <div class="bg-error-50 rounded-lg p-4 text-center">
                  <p class="text-xs text-gray-600 mb-1">困难</p>
                  <p class="text-2xl font-semibold text-error-600">15</p>
                  <p class="text-xs text-gray-500 mt-1">17.6%</p>
                </div>
              </div>
            </div>

            <!-- 快捷操作 -->
            <div class="pt-6 border-t border-gray-200">
              <h3 class="text-base font-semibold text-gray-900 mb-3">快捷操作</h3>
              <div class="flex items-center space-x-3">
                <button class="flex-1 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-4 py-3 rounded font-medium text-sm">
                  <i class="fas fa-eye mr-2"></i>查看题目列表
                </button>
                <button class="flex-1 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-4 py-3 rounded font-medium text-sm">
                  <i class="fas fa-plus mr-2"></i>添加题目
                </button>
                <button class="flex-1 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-4 py-3 rounded font-medium text-sm">
                  <i class="fas fa-download mr-2"></i>导出题目
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function toggleCategory(id) {
      event.stopPropagation();
      const element = document.getElementById(id);
      const icon = document.getElementById('icon-' + id);

      if (element.style.display === 'none') {
        element.style.display = 'block';
        icon.classList.remove('fa-chevron-right');
        icon.classList.add('fa-chevron-down');
      } else {
        element.style.display = 'none';
        icon.classList.remove('fa-chevron-down');
        icon.classList.add('fa-chevron-right');
      }
    }

    function selectCategory(id) {
      event.stopPropagation();
      document.getElementById('emptyState').style.display = 'none';
      document.getElementById('detailContent').style.display = 'block';
    }

    function expandAll() {
      alert('全部展开功能');
    }

    function addRootCategory() {
      const name = prompt('请输入一级分类名称:');
      if (name) {
        alert('添加分类: ' + name);
      }
    }

    function editCategory(e, id) {
      e.stopPropagation();
      alert('编辑分类: ' + id);
    }

    function addSubCategory(e, id) {
      e.stopPropagation();
      const name = prompt('请输入子分类名称:');
      if (name) {
        alert('在 ' + id + ' 下添加子分类: ' + name);
      }
    }

    function deleteCategory(e, id) {
      e.stopPropagation();
      if (confirm('确定要删除此分类吗？分类下的所有题目将被移除关联。')) {
        alert('删除分类: ' + id);
      }
    }

    function editCategoryDetail() {
      alert('编辑知识点详情');
    }
  </script>
  <!-- iframe嵌入检测脚本 -->
  <script>
  (function() {
    function isInIframe() {
      try {
        return window.self !== window.top;
      } catch (e) {
        return true;
      }
    }
    function hasEmbeddedParam() {
      return window.location.search.includes("embedded=true");
    }
    if (isInIframe() || hasEmbeddedParam()) {
      const style = document.createElement("style");
      style.textContent = `
        header { display: none !important; }
        .pt-16 { padding-top: 0 !important; }
        button[onclick*="history.back"] { display: none !important; }
      `;
      document.head.appendChild(style);
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", hideElements);
      } else {
        hideElements();
      }
      function hideElements() {
        const headers = document.querySelectorAll("header");
        headers.forEach(h => h.style.display = "none");
        const ptElements = document.querySelectorAll(".pt-16");
        ptElements.forEach(el => {
          el.classList.remove("pt-16");
          el.style.paddingTop = "0";
        });
        const backButtons = document.querySelectorAll("button[onclick*="history.back"]");
        backButtons.forEach(btn => btn.style.display = "none");
      }
    }
  })();
  </script>

</body>
</html>
